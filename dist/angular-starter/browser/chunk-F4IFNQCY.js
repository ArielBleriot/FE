import{b as S,d as y}from"./chunk-2TM6VHVN.js";import"./chunk-M6HHMVXZ.js";import{a as L}from"./chunk-IWLRDPED.js";import{d as T,e as k}from"./chunk-NXCYDKJL.js";import{c as x,d as l,f as E,g as F,j as C,l as M,m as j,q as N,s as I}from"./chunk-4MQ6PB4H.js";import"./chunk-7UYMJC3P.js";import"./chunk-XKGURZDU.js";import{e as c}from"./chunk-343MNPB3.js";import"./chunk-XSSXK7EZ.js";import"./chunk-NHJEPEPJ.js";import{O as f,Sa as p,Xa as o,Ya as r,Za as n,cb as g,gc as P,mb as d,ob as v,tb as h,ub as b,wa as m,xa as a}from"./chunk-QU7ZFIGS.js";import"./chunk-35PI25VP.js";var H=(()=>{let s=class s{constructor(t,e,i,w,R){this.fb=t,this.apiService=e,this.router=i,this.route=w,this.toastService=R}ngOnInit(){this.resetToken=this.route.snapshot.queryParamMap.get("token")||"",this.resetPasswordForm=this.fb.group({newPassword:["",[l.required,l.minLength(6)]],confirmPassword:["",[l.required]]},{validator:this.passwordsMatchValidator})}get newPassword(){return this.resetPasswordForm.get("newPassword")}get confirmPassword(){return this.resetPasswordForm.get("confirmPassword")}passwordsMatchValidator(t){let e=t.get("newPassword")?.value,i=t.get("confirmPassword")?.value;e!==i?t.get("confirmPassword")?.setErrors({mustMatch:!0}):t.get("confirmPassword")?.setErrors(null)}onSubmit(){if(this.resetPasswordForm.valid&&this.resetToken){let t=this.resetPasswordForm.value;t.token=this.resetToken,this.isSubmitting=!0,this.apiService.resetPassword(t).subscribe(e=>{e.successfull?(this.toastService.add({severity:"success",summary:"",detail:e.message}),this.isSubmitting=!1,this.router.navigate(["/accounts/login"])):(this.toastService.add({severity:"error",summary:"Error",detail:e.message}),this.isSubmitting=!1)},e=>{this.toastService.add({severity:"error",summary:"Something went wrong",detail:e.error.message}),this.isSubmitting=!1})}}};s.\u0275fac=function(e){return new(e||s)(a(N),a(L),a(y),a(S),a(c))},s.\u0275cmp=f({type:s,selectors:[["app-password-reset"]],standalone:!0,features:[h([c]),b],decls:29,vars:3,consts:[[1,"password-reset-section"],[1,"h-100","d-flex"],[1,"bg-mode","rounded-4","overflow-hidden","w-100"],[1,"row","g-0"],[1,"col-lg-6","align-items-center","justify-content-center","order-2","order-lg-1","d-lg-flex","d-none","border-end-lg-1","border-gray-300"],[1,"p-3","p-lg-5"],["src","../../../../assets/img/brandLogo.jpg","alt","Logo",1,"img-fluid","w-px-400"],[1,"col-lg-6","order-1"],[1,"p-4","p-sm-7","vh-xxl-100","overflow-auto"],[1,"max-w-px-500","mx-auto"],["href","index.html"],["src","../../../../assets/img/brandLogo.jpg","alt","Logo",1,"h-px-50","mb-4"],[1,"mb-2","h3","fw-bold","color-gray-900"],[1,"form-label","color-gray-600","mb-5"],[1,"mt-4","text-start",3,"formGroup","ngSubmit"],[1,"mb-3","position-relative"],["for","newPassword",1,"form-label","color-gray-600"],["id","newPassword","type","password","formControlName","newPassword","placeholder","Enter new password",1,"form-control","rounded-2","h-px-40"],["for","confirmPassword",1,"form-label","color-gray-600"],["id","confirmPassword","type","password","formControlName","confirmPassword","placeholder","Confirm new password",1,"form-control","rounded-2","h-px-40"],["type","submit",1,"btn","btn-primary","w-100","mb-0","mt-3",3,"disabled"]],template:function(e,i){e&1&&(o(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),n(6,"img",6),r()(),o(7,"div",7)(8,"div",8)(9,"div",9)(10,"a",10),n(11,"img",11),r(),o(12,"h1",12),d(13,"Reset Your Password"),r(),o(14,"p",13),d(15,"Enter your new password and confirm it."),r(),o(16,"form",14),g("ngSubmit",function(){return i.onSubmit()}),o(17,"div",15)(18,"label",16),d(19,"New Password"),r(),n(20,"input",17),r(),o(21,"div",15)(22,"label",18),d(23,"Confirm Password"),r(),n(24,"input",19),r(),o(25,"div")(26,"button",20),d(27),r()()()()()()()()()(),n(28,"p-toast")),e&2&&(m(16),p("formGroup",i.resetPasswordForm),m(10),p("disabled",!i.resetPasswordForm.valid||i.isSubmitting),m(),v(" ",i.isSubmitting?"Please wait...":"Submit"," "))},dependencies:[P,I,C,x,E,F,M,j,k,T]});let u=s;return u})();export{H as PasswordResetComponent};
