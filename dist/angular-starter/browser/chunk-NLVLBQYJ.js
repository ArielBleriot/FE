import{d as C,e as E,h as L}from"./chunk-2TM6VHVN.js";import"./chunk-M6HHMVXZ.js";import{a as V}from"./chunk-IWLRDPED.js";import{d as D,e as G}from"./chunk-NXCYDKJL.js";import{b as k,c as F,d as g,f as N,g as M,j as T,l as j,m as q,q as R,r as P,s as A}from"./chunk-4MQ6PB4H.js";import"./chunk-7UYMJC3P.js";import"./chunk-XKGURZDU.js";import{e as v}from"./chunk-343MNPB3.js";import"./chunk-XSSXK7EZ.js";import"./chunk-NHJEPEPJ.js";import{O as h,Qa as f,Sa as s,Xa as e,Ya as i,Za as c,cb as S,cc as w,db as b,gc as I,mb as r,ob as x,tb as y,ub as _,wa as a,xa as p}from"./chunk-QU7ZFIGS.js";import"./chunk-35PI25VP.js";function B(t,o){t&1&&(e(0,"small"),r(1,"Email is required."),i())}function O(t,o){t&1&&(e(0,"small"),r(1,"Invalid email format."),i())}function W(t,o){if(t&1&&(e(0,"div",28),f(1,B,2,0,"small",29)(2,O,2,0,"small",29),i()),t&2){let m=b();a(),s("ngIf",m.f.email.errors==null?null:m.f.email.errors.required),a(),s("ngIf",m.f.email.errors==null?null:m.f.email.errors.email)}}function Y(t,o){t&1&&(e(0,"small"),r(1,"Password is required."),i())}function z(t,o){t&1&&(e(0,"small"),r(1," Password must be at least 6 characters long. "),i())}function H(t,o){if(t&1&&(e(0,"div",28),f(1,Y,2,0,"small",29)(2,z,2,0,"small",29),i()),t&2){let m=b();a(),s("ngIf",m.f.password.errors==null?null:m.f.password.errors.required),a(),s("ngIf",m.f.password.errors==null?null:m.f.password.errors.minlength)}}var le=(()=>{let o=class o{constructor(u,d,n,l){this.fb=u,this.authService=d,this.router=n,this.toastService=l,this.isSubmitting=!1,this.loginError=""}ngOnInit(){this.loginForm=this.fb.group({email:["",[g.required,g.email]],password:["",[g.required,g.minLength(6)]],rememberMe:[!1]})}get f(){return this.loginForm.controls}onSubmit(){if(this.isSubmitting=!0,this.loginForm.invalid){this.isSubmitting=!1;return}let{email:u,password:d,rememberMe:n}=this.loginForm.value;this.authService.login(u,d).subscribe({next:l=>{console.log(l),localStorage.setItem("AuthToken",l.token),localStorage.setItem("fullName",l.fullName),localStorage.setItem("studentId",l.studentId),localStorage.setItem("email",l.email),localStorage.setItem("universityName",l.universityName),this.router.navigate(["/"])},error:l=>{debugger;this.toastService.add({severity:"error",summary:"Login failed",detail:l.error.message}),this.loginError="Invalid credentials. Please try again.",this.isSubmitting=!1}})}};o.\u0275fac=function(d){return new(d||o)(p(R),p(V),p(C),p(v))},o.\u0275cmp=h({type:o,selectors:[["app-login"]],standalone:!0,features:[y([v]),_],decls:39,vars:5,consts:[[1,"login-section"],[1,"h-100","d-flex"],[1,"bg-mode","rounded-4","overflow-hidden","w-100"],[1,"row","g-0"],[1,"col-lg-6","align-items-center","justify-content-center","order-2","order-lg-1","d-lg-flex","d-none","border-end-lg-1","border-gray-300"],[1,"p-3","p-lg-5"],["src","../../../../assets/img/brandLogo.jpg","alt","",1,"img-fluid","w-px-300"],[1,"col-lg-6","order-1"],[1,"p-4","p-sm-7","vh-xxl-100","overflow-auto"],[1,"max-w-px-500","mx-auto"],[1,"mb-2","h3","fw-bold","color-gray-900"],[1,"mb-0","color-gray-600"],["routerLink","/accounts/signup"],[1,"mt-4","text-start",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","email",1,"form-label","color-gray-600"],["id","email","formControlName","email","type","email",1,"form-control","rounded-2","h-px-40"],["class","text-danger",4,"ngIf"],[1,"mb-3","position-relative"],["for","password",1,"form-label","color-gray-600"],["id","password","formControlName","password","type","password",1,"form-control","rounded-2","h-px-40"],[1,"mb-3","d-sm-flex","justify-content-between","align-items-center"],[1,"d-flex","align-items-center","gap-2"],["type","checkbox","id","rememberCheck","formControlName","rememberMe",1,"form-check-input","checkbox-sm"],["for","rememberCheck",1,"form-check-label","color-gray-600","pt-1"],["type","submit",1,"btn","btn-primary","w-100","mb-0","mt-3",3,"disabled"],["routerLink","/accounts/forgot-password",1,"d-flex","justify-content-center"],[1,"mt-5","cursor-pointer","fs-14","hover-opacity-85"],[1,"text-danger"],[4,"ngIf"]],template:function(d,n){d&1&&(e(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),c(6,"img",6),i()(),e(7,"div",7)(8,"div",8)(9,"div",9)(10,"h1",10),r(11,"Welcome back"),i(),e(12,"p",11),r(13,"New here?"),e(14,"a",12),r(15," Create an account"),i()(),e(16,"form",13),S("ngSubmit",function(){return n.onSubmit()}),e(17,"div",14)(18,"label",15),r(19,"Enter email"),i(),c(20,"input",16),f(21,W,3,2,"div",17),i(),e(22,"div",18)(23,"label",19),r(24,"Enter password"),i(),c(25,"input",20),f(26,H,3,2,"div",17),i(),e(27,"div",21)(28,"div",22),c(29,"input",23),e(30,"label",24),r(31," Remember me "),i()()(),e(32,"div")(33,"button",25),r(34),i()()(),e(35,"div",26)(36,"a",27),r(37,"Forgot Your Password?"),i()()()()()()()()(),c(38,"p-toast")),d&2&&(a(16),s("formGroup",n.loginForm),a(5),s("ngIf",n.f.email.touched&&n.f.email.invalid),a(5),s("ngIf",n.f.password.touched&&n.f.password.invalid),a(7),s("disabled",n.isSubmitting),a(),x(" ",n.isSubmitting?"Logging in...":"Login"," "))},dependencies:[I,w,P,T,F,k,N,M,L,E,A,j,q,G,D],encapsulation:2});let t=o;return t})();export{le as LoginComponent};
